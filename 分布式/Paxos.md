# Paxos



## 一、一致性

在学习分布式算法的时候，有时会被其迷惑，有些算法解决的问题不一样。

所以做了一个简单的分类，**事务一致性**和**集群一致性**

### 1. 事务一致性

在解决一件事的时候，上下有多个事务，其不同的事务工作内容是不一样的

例如 2PC、3PC、TCC 、异步确保，最大努力通知，这些**涉及的是上下不同的事务**，要么全成功，要么全回滚。

### 2. 集群一致性

**首先得要明确一个问题，数据不能存在单点上**

所以要有一个 ``State Mechine Replication`` 的过程。这就是集群集群意味着工作内容，行为方式都是一致的。所以集群中的数据都是相同的。MySQL 的主从同步，Redis 的 Cluster 都是如此。

但同样在集群一致性中，任然存在强一致性和弱一致性。

在 MySQL 的主从同步就是强一致性，分为有三个步骤

1. Master 接受写请求
2. Master 复制日志到 Slave
3. Master 等待 Slave **全部**返回

一个节点失败，整个集群不可用，所以就有了弱一致性算法。

## 二、Paxos

有了上述概念再来介绍 Paxos 就简单了多，Paxos 就是个集群一致性算法，是**一个共识算法**。

看这个 [Paxos、Raft和 ZAB](<https://www.youtube.com/watch?v=BhosKsE8up8>) 就比较合适，多得内容以后再说吧，饿了